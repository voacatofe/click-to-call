; ======================= TRANSPORTE SEGURO (WSS) =======================
[transport-wss]
type=transport
protocol=wss
bind=0.0.0.0:8089
; Certificados SSL (conforme documentação oficial)
cert_file=/etc/asterisk/keys/asterisk.pem
priv_key_file=/etc/asterisk/keys/asterisk.pem
ca_list_file=/etc/asterisk/keys/ca-certificates.crt
; Configurações TLS seguras (baseado na documentação)
method=tlsv1_2,tlsv1_3
cipher=ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS
verify_server=no
verify_client=no
; Configurações de rede
external_media_address=localhost
external_signaling_address=localhost

; ======================= TEMPLATES =======================
[auth-userpass](!)
type=auth
auth_type=userpass
realm=clicktocall.local

[aor-single-contact](!)
type=aor
max_contacts=5
remove_existing=yes
; Configurações de qualificação (conforme documentação)
qualify_frequency=60
qualify_timeout=3.0

[webrtc-endpoint](!)
type=endpoint
context=from-internal
transport=transport-wss
; ===== CONFIGURAÇÃO WEBRTC OFICIAL =====
webrtc=yes
use_avpf=yes
media_encryption=dtls
dtls_verify=fingerprint
dtls_setup=actpass
dtls_auto_generate_cert=yes
ice_support=yes
media_use_received_transport=yes
rtcp_mux=yes
; ===== CODECS OTIMIZADOS =====
disallow=all
allow=opus,ulaw,alaw,g722
; ===== CONFIGURAÇÕES RTP (PADRÃO OFICIAL) =====
rtp_symmetric=yes
force_rport=yes
direct_media=no
; ===== CONFIGURAÇÕES DE SESSÃO =====
timers=yes
timers_min_se=90
timers_sess_expires=1800
; ===== CONFIGURAÇÕES DE SEGURANÇA =====
send_pai=no
send_rpid=no
trust_id_inbound=no
; ===== CONFIGURAÇÕES DE DTMF =====
dtmf_mode=rfc4733
; ===== CONFIGURAÇÕES NAT =====
rtp_timeout=60
rtp_timeout_hold=300

; ======================= AGENTE 1001 =======================
[agent-1001](webrtc-endpoint)
auth=auth-1001
aors=agent-1001
; Configurações específicas do agente
callerid="Agent 1001" <1001>

[auth-1001](auth-userpass)
username=agent-1001
password=SecurePass2024!
realm=clicktocall.local

[agent-1001](aor-single-contact)

; ======================= AGENTE 1002 (EXEMPLO ADICIONAL) =======================
[agent-1002](webrtc-endpoint)
auth=auth-1002
aors=agent-1002
callerid="Agent 1002" <1002>

[auth-1002](auth-userpass)
username=agent-1002
password=SecurePass2024!
realm=clicktocall.local

[agent-1002](aor-single-contact)

; ======================= CONFIGURAÇÕES GLOBAIS =======================
[global]
type=global
; Configurações globais conforme documentação
endpoint_identifier_order=ip,username,anonymous
max_forwards=70
user_agent=Asterisk PBX WebRTC 