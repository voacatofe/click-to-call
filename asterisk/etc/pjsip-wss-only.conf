; ========================================================================
; PJSIP Configuration - WSS-Only (WebSocket Secure)
; Based on Official Asterisk Documentation
; ========================================================================

; ==================== TRANSPORT WSS-ONLY ====================
[transport-wss]
type=transport
protocol=wss
bind=0.0.0.0
; Nota: Outros parâmetros de transport são IGNORADOS para WSS (doc oficial)

; ==================== SHARED OBJECTS ====================
; AOR compartilhado
[agent-1001]
type=aor
max_contacts=10
remove_existing=yes

; Auth compartilhado
[agent-1001]
type=auth
auth_type=userpass
username=agent-1001
password=changeme

; ==================== ENDPOINT WSS-ONLY ====================
[agent-1001-wss]
type=endpoint
aors=agent-1001
auth=agent-1001
transport=transport-wss
context=from-internal
; WebRTC configuration (doc oficial)
webrtc=yes
; webrtc=yes automaticamente habilita:
; - use_avpf=yes
; - media_encryption=dtls
; - dtls_verify=fingerprint
; - dtls_setup=actpass
; - ice_support=yes
; - media_use_received_transport=yes
; - rtcp_mux=yes
dtls_auto_generate_cert=yes
disallow=all
allow=opus,ulaw,alaw
rtp_symmetric=yes
force_rport=yes
direct_media=no
timers=yes
timers_min_se=90
timers_sess_expires=1800 